FROM php:fpm

RUN apt-get update && apt-get upgrade -y && \
apt-get install -y libpng-dev libjpeg-dev libfreetype6-dev locales locales-all && \
docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ && \
docker-php-ext-install pdo pdo_mysql mysqli bcmath sockets gd gettext && \
apt-get autoremove && apt-get clean && \
ln -fs /usr/share/zoneinfo/Europe/Moscow /etc/localtime

#ENV DEBIAN_FRONTEND noninteractive LANGUAGE=ru_RU.UTF-8 LANG=ru_RU.UTF-8 LC_ALL ru_RU.UTF-8

#COPY ./www.conf /usr/local/etc/php-fpm.d/www.conf
ADD ./php.ini /usr/local/etc/php/php.ini
ADD ./www-data /home/www-data
ADD ./zabbix.conf.php /home/www-data/zabbix/conf/
#ADD ./font-config /tmp/font-config

RUN chown -R www-data:www-data /home/www-data 
#locale-gen ru_RU.UTF-8 && dpkg-reconfigure locales
#mkdir -p /var/lib/locales/supported.d/ && \
#echo "en_US.UTF-8 UTF-8" > /var/lib/locales/supported.d/local && \
#echo "ru_RU.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "ja_JP.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "cs_CZ.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "ko_KR.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "it_IT.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "pt_BR.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "sk_SK.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "uk_UA.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "fr_FR.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "pl_PL.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \
#echo "zh_CN.UTF-8 UTF-8" >> /var/lib/locales/supported.d/local && \

VOLUME /home/www-data
#EXPOSE 9000
